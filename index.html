<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>木人艸 | 互動式報價系統</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #fcfcfc; color: #333; }
        .pdf-container { background-color: #fff; border: 1.5px solid #000; padding: 25px; position: relative; }
        .pdf-table th, .pdf-table td { border: 1px solid #000; padding: 8px; font-size: 13px; vertical-align: middle; }
        .header-bg { background-color: #fcf4d9; font-weight: bold; }
        .category-header { background-color: #f3f4f6; font-weight: bold; text-align: left; padding-left: 15px; border: 1px solid #000; font-size: 14px; color: #444; }
        .text-alert { color: #d93025; font-size: 11px; line-height: 1.5; font-weight: 500; }
        .no-border-input { border: none; width: 100%; background: transparent; outline: none; padding: 4px; }
        .no-border-input:focus { background-color: #fffef0; }
        input[type="number"] { width: 55px; text-align: center; border: 1px solid #ddd; border-radius: 4px; }
        @media print { 
            .no-print { display: none; } 
            .pdf-container { border: none; box-shadow: none; padding: 0; }
            /* 確保背景色在列印時呈現 */
            .bg-blue-50 { background-color: #eff6ff !important; -webkit-print-color-adjust: exact; }
        }
        .table-responsive { overflow-x: auto; -webkit-overflow-scrolling: touch; }
        
        /* 圖片預覽樣式 */
        .img-preview { width: 48px; height: 48px; object-fit: cover; border-radius: 4px; border: 1px solid #eee; cursor: zoom-in; transition: transform 0.2s; }
        .img-preview:hover { transform: scale(1.1); border-color: #556b2f; }
        
        /* 標籤 Badge 樣式 */
        .badge { display: inline-block; padding: 2px 6px; border-radius: 4px; font-size: 11px; font-weight: bold; margin-bottom: 2px; }
        .badge-vege { background-color: #e8f5e9; color: #2e7d32; border: 1px solid #c8e6c9; }
        .badge-meat { background-color: #fff3e0; color: #ef6c00; border: 1px solid #ffe0b2; }
        .badge-gray { background-color: #f5f5f5; color: #757575; border: 1px solid #e0e0e0; }

        #lightbox { display: none; position: fixed; z-index: 1000; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); align-items: center; justify-content: center; }
        #lightbox img { max-width: 90%; max-height: 80%; border: 4px solid white; border-radius: 8px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
    </style>
</head>
<body class="p-4 md:p-10">

    <div id="lightbox" onclick="this.style.display='none'" class="no-print">
        <img id="lightbox-img" src="" alt="餐點大圖">
        <p class="absolute bottom-10 text-white text-sm font-light">點擊任何地方關閉預覽</p>
    </div>

    <div class="max-w-[1100px] mx-auto pdf-container shadow-2xl mb-10">
        <div class="flex justify-between items-start mb-6 border-b-2 border-black pb-4">
            <div class="text-sm">
                <h1 class="text-3xl font-bold tracking-tighter mb-1">木人艸</h1>
                <p>服務專線：02-2883-2113</p>
                <p>公司地址：台北市士林區大南路379號</p>
            </div>
            <div class="text-center">
                <h2 class="text-xl font-bold tracking-widest uppercase">木人艸股份有限公司</h2>
                <p class="text-sm text-gray-600">台灣良農食材 (會議餐點 ‧ 餐盒 ‧ 蛋糕)</p>
            </div>
            <div class="text-right text-xs text-gray-400"><p>修訂版本：2022/08</p></div>
        </div>

        <div class="table-responsive mb-8">
            <table class="w-full pdf-table">
                <tr>
                    <td class="header-bg w-24">派單日期</td><td colspan="2"><input type="text" id="order-date" class="no-border-input" readonly></td>
                    <td class="header-bg w-24">訂單編號</td><td colspan="2">Y_20250909-01</td>
                    <td class="header-bg w-24">報價業務</td><td>Yvonne</td>
                </tr>
                <tr>
                    <td class="header-bg">送餐日期</td>
                    <td colspan="2" class="text-center font-bold">
                        <input type="date" id="delivery-date" class="no-border-input text-center font-bold">
                    </td>
                    <td colspan="5" class="text-alert font-bold leading-relaxed px-4">
                        ● 預訂限制：需於出餐前 5 個工作天預訂（系統不開放 7 日內訂單）<br>
                        ● 早晨加成：若餐盒開餐時間於 9:00 以前，將另收取費用 3,500 元<br>
                        ● 撤場規定：若撤場時間晚於 18:00，則另議隔日撤場或加價延遲撤場
                    </td>
                </tr>
                <tr>
                    <td class="header-bg">送餐地址</td><td colspan="5"><input type="text" placeholder="路名/門牌" class="no-border-input"></td>
                    <td class="header-bg w-20">樓層</td><td><input type="text" class="no-border-input text-center" placeholder="F"></td>
                </tr>
                <tr>
                    <td class="header-bg">場地需求備註</td>
                    <td colspan="7" class="py-2 px-3">
                        <input type="text" id="venue-remarks" placeholder="請填寫場地特殊要求" class="no-border-input mb-1">
                        <div class="inline-flex items-center gap-1 bg-blue-50 border border-blue-100 px-2 py-0.5 rounded-sm text-blue-700">
                            <svg class="w-3 h-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                            </svg>
                            <span class="text-[11px] font-medium leading-tight tracking-tighter">建議：現場需有基本的水電供應（以符合衛生安全）</span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="header-bg">地下停車場</td>
                    <td colspan="7">
                        <div class="flex items-center gap-6 px-2 py-1">
                            <label class="flex items-center gap-2 cursor-pointer"><input type="radio" name="parking" value="yes"> 有</label>
                            <label class="flex items-center gap-2 cursor-pointer"><input type="radio" name="parking" value="no"> 無</label>
                            <span class="text-xs text-gray-400 font-normal">(大樓本身是否有地下停車場，作為物流判斷依據)</span>
                        </div>
                    </td>
                </tr>
            </table>
        </div>

        <h3 class="text-center font-bold mb-3 tracking-widest border-b border-black pb-1 uppercase italic opacity-50">...餐點明細與統計區域...</h3>

        <div class="mt-12 flex flex-wrap gap-4 no-print justify-center">
            <button onclick="window.print()" class="bg-gray-200 text-black px-10 py-3 rounded-full font-bold hover:bg-gray-300 transition shadow-lg">列印 / 存成 PDF</button>
            <button onclick="submitToMake()" class="bg-black text-white px-10 py-3 rounded-full font-bold hover:bg-gray-800 transition shadow-lg">確認並提交訂單 (JSON)</button>
        </div>
    </div>

    </body>
</html>
